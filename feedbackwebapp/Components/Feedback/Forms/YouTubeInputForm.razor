@namespace FeedbackWebApp.Components.Feedback.Forms

<div class="youtube-input">
    <fieldset class="input-type-selector mb-3">
        <legend class="visually-hidden">Select YouTube input type</legend>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inputType" id="videoInput" value="video" 
                   checked="@(InputType == "video")" @onchange="@(() => ChangeInputType("video"))" />
            <label class="form-check-label" for="videoInput">
                <i class="bi bi-play-btn me-1" aria-hidden="true"></i>Video
            </label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inputType" id="playlistInput" value="playlist" 
                   checked="@(InputType == "playlist")" @onchange="@(() => ChangeInputType("playlist"))" />
            <label class="form-check-label" for="playlistInput">
                <i class="bi bi-collection-play me-1" aria-hidden="true"></i>Playlist
            </label>
        </div>
    </fieldset>

    @if (InputType == "video")
    {
        <div class="form-floating">
            <input type="text" class="form-control" id="videoIds" @bind="VideoIds" aria-describedby="videoIdsHelp" />
            <label for="videoIds">Video IDs or URLs (comma-separated)</label>
            <div id="videoIdsHelp" class="form-text visually-hidden">Enter one or more YouTube video IDs or URLs separated by commas</div>
        </div>
    }
    else
    {
        <div class="form-floating">
            <input type="text" class="form-control" id="playlistIds" @bind="PlaylistIds" aria-describedby="playlistIdsHelp" />
            <label for="playlistIds">Playlist IDs or URLs (comma-separated)</label>
            <div id="playlistIdsHelp" class="form-text visually-hidden">Enter one or more YouTube playlist IDs or URLs separated by commas</div>
        </div>
    }
</div>

@code {
    private string InputType { get; set; } = "video";

    public string? VideoIds { get; set; }

    public string? PlaylistIds { get; set; }

    private void ChangeInputType(string newType)
    {
        InputType = newType;
        // Clear out the values when switching types
        if (newType == "video")
        {
            PlaylistIds = null;
        }
        else
        {
            VideoIds = null;
        }
    }

    public void RefreshUI()
    {
        // This method can be used to trigger a UI refresh if needed.
        // For example, you might want to call StateHasChanged() here if this component is part of a larger UI.
        StateHasChanged();
    }
}