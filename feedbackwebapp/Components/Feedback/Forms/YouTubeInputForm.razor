@namespace FeedbackWebApp.Components.Feedback.Forms

<div class="youtube-input">
    <fieldset class="input-type-selector mb-3">
        <legend class="visually-hidden">Select YouTube input type</legend>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inputType" id="videoInput" value="video" 
                   checked="@(InputType == "video")" @onchange="@(() => ChangeInputType("video"))" />
            <label class="form-check-label" for="videoInput">
                <i class="bi bi-play-btn me-1" aria-hidden="true"></i>Video
            </label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inputType" id="playlistInput" value="playlist" 
                   checked="@(InputType == "playlist")" @onchange="@(() => ChangeInputType("playlist"))" />
            <label class="form-check-label" for="playlistInput">
                <i class="bi bi-collection-play me-1" aria-hidden="true"></i>Playlist
            </label>
        </div>
    </fieldset>

    @if (InputType == "video")
    {
        <div class="form-floating">
            <input type="text" class="form-control" id="videoId" @bind="VideoId" aria-describedby="videoIdHelp" />
            <label for="videoId">Video ID or URL</label>
            <div id="videoIdHelp" class="form-text visually-hidden">Enter a YouTube video ID or URL</div>
        </div>
    }
    else
    {
        <div class="form-floating">
            <input type="text" class="form-control" id="playlistId" @bind="PlaylistId" aria-describedby="playlistIdHelp" />
            <label for="playlistId">Playlist ID or URL</label>
            <div id="playlistIdHelp" class="form-text visually-hidden">Enter a YouTube playlist ID or URL</div>
        </div>
    }
</div>

@code {
    private string InputType { get; set; } = "video";

    public string? VideoId { get; set; }

    public string? PlaylistId { get; set; }

    private void ChangeInputType(string newType)
    {
        InputType = newType;
        // Clear out the values when switching types
        if (newType == "video")
        {
            PlaylistId = null;
        }
        else
        {
            VideoId = null;
        }
    }

    public void RefreshUI()
    {
        StateHasChanged();
    }
}